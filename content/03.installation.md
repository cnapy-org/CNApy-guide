## Installation

### CNApy main program

There are two ways to install CNApy itself:

1. Recommended but more complicated: Under any operating system, by installing CNApy as a conda package. For detailed instructions to do this, see [https://github.com/cnapy-org/CNApy#install-cnapy-with-conda](https://github.com/cnapy-org/CNApy#install-cnapy-with-conda).
2. Not recommended but simple: Under Windows, you can install CNApy by using the .exe installer attached to [CNApy's latest release](https://github.com/cnapy-org/CNApy/releases/latest). Once you run the installer, it will guide you through the installation process.


### CNA legacy bridge requirements (optional)

In order to use "old" function from the original Matlab/Octave *CellNetAnalyzer*, you need one of the following programs installed at your systems (follow the links to the programs for download and installation instructions)...
1. [MATLAB](https://www.mathworks.de/products/matlab/index.html), **in a version from 2019b up to 2021b (older and newer versions are not supported!)**.
2. [GNU Octave](https://www.gnu.org/software/octave/index) installed at your system, **in a version >6.4.0 (older versions are not supported!)**.

...as well as the original [*CellNetAnalyzer*](http://www2.mpi-magdeburg.mpg.de/projects/cna/cna.html/).


### Additional solvers (optional)

CNApy itself is already packaged and installed with the open source linear programming solver [GLPK](https://www.gnu.org/software/glpk/) which is fast enough for simple calculations.
However, for large models and more complications calculations (such as Minimal Cut Set analyses), it is recommended to install a more sophisticated and faster solver such as [CPLEX](https://www.ibm.com/products/ilog-cplex-optimization-studio) or [Gurobi](https://www.gurobi.com/). Both of these solvers have free academic license programs.

#### CPLEX

You can either install the *CPLEX Community Edition* which only works for small models but which is easier to install and which does not have to be downloaded separately, or the full version of CPLEX which you can download from [CPLEX's website](https://www.ibm.com/products/ilog-cplex-optimization-studio). Only the full version works with large models.

Regardless of your choice from the CPLEX Community Edition or the full CPLEX version, the first step is to use conda in order to activate the CNApy conda environment. How you activate conda depends on your installation method:

1. Only if you installed CNApy with conda [as described here](https://github.com/cnapy-org/CNApy#install-cnapy-with-conda), execute the following command:

```bash
conda activate cnapy-dev
```

2. Only if you installed CNApy through its Windows installer, execute the following command:

```bash
conda activate C:\Users\YourUserName\cnapy```
```

3. Only if you installed CNApy through its development environment using Git and directly [as described here](https://github.com/cnapy-org/CNApy#install-cnapy-with-conda), execute the following command:

```bash
conda activate cnapy-dev
```

Once you activated the CNApy environment according to your CNApy installation method, navigate to your CPLEX installation (e.g. via ```cd "C:\Program Files\IBM\ILOG\CPLEX_Studio221"```) and install the CPLEX package as follows:

```bash
(cnapy-dev) pip install cplex
```

*If you only want to use the CPLEX Community Edition, which only works for small models, you're already finished. If you want to use the full CPLEX version (which you downloaded from [CPLEX's website](https://www.ibm.com/products/ilog-cplex-optimization-studio)), you have to perform the subsequent tasks, too.*

Now, go to the folder where you installed CPLEX:

```bash
(cnapy-dev) cd your_path_to_cplex
```

Then, install CPLEX's Python API by using the following command (for further details, see [this](https://www.ibm.com/docs/en/icos/20.1.0?topic=cplex-setting-up-python-api)):

```bash
(cnapy-dev) python ./python/setup.py install
```

Now add an environmental variable called PYTHONPATH which leads the cplex Python package to CPLEX. Under Linux, you can do this as follows:

```bash
(cnapy-dev) export PYTHONPATH=your_path_to_cplex/python/your_cplex_version/your_system
```

Under Windows, you can do this by searching for your system's "environmental variables" and adding the variable PYTHONNOUSERSITE with the value "your_path_to_cplex/python/your_cplex_version/your_system" using Windows's environmental variables setting window.
